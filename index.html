<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Vibe</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="wrapper">
        <!-- Colonne de Chat -->
        <div class="chat-column">
            <div class="header">
                <div class="header-main">
                    <h1 id="chatbotTitle" data-client-name-display="true">La Pâtisserie des Brotteaux</h1>
                    <p class="subtitle">Madame Martin souhaite passer une commande. Vous pouvez la questionner. Lorsque vous avez obtenu toutes les informations nécessaires, récapitulez l'ensemble de la commande et proposez de lui envoyer un devis.</p>
                </div>
                <div class="header-actions">
                    <button id="debugToggle" class="debug-toggle" aria-pressed="false">Afficher debug</button>
                </div>
            </div>
            <div class="name-input-section" hidden>
                <input 
                    type="text" 
                    id="clientNameInput" 
                    class="name-input" 
                    placeholder="Entrez votre nom pour commencer"
                    autocomplete="off"
                >
                <button id="validateNameBtn" class="validate-name-btn" disabled>Valider</button>
            </div>
            <div class="chat-box" id="chatBox">
                <!-- Les messages s'affichent ici -->
            </div>
            <div class="input-area-wrapper">
                <div class="input-area">
                    <input 
                        type="text" 
                        id="messageInput" 
                        placeholder="Validez votre nom pour écrire..."
                        autocomplete="off"
                        disabled
                    >
                    <button id="sendBtn" disabled>Envoyer</button>
                </div>
            </div>
            <p class="disclaimer-text">Votre prénom sert uniquement à personnaliser votre expérience.<br>Vos échanges, anonymisés, peuvent être utilisés pour entraîner des intelligences artificielles, sans aucune donnée identifiable.</p>
        </div>

        <!-- Colonne d'information -->
        <div class="info-column">
            <div class="info-card">
                <img src="La patisserie des Brotteaux.png" alt="Logo Pâtisserie des Brotteaux" class="info-card-logo">
                <h3>Informations</h3>
                <p><strong>Adresse :</strong> 71 rue Tronchet, 69006 Lyon</p>
                <p><strong>Horaires :</strong></p>
                <ul>
                    <li>Lundi : Fermé</li>
                    <li>Mardi - Vendredi : 8h00 – 19h00</li>
                    <li>Samedi : 8h30 – 18h00</li>
                    <li>Dimanche : 8h30 – 13h00</li>
                </ul>
                <p><strong>Livraison (rayon 1km) :</strong></p>
                 <ul>
                    <li>Zones : Lyon 6, Lyon 3 (partiel), Villeurbanne (partiel)</li>
                    <li>Jours : Du Mardi au Samedi</li>
                    <li>Minimum : 20 €</li>
                    <li>Frais : 3 €</li>
                </ul>
            </div>
            <div id="calendar-container" class="calendar-container"></div>
        </div>

    </div>
    
    <!-- Panneau de debug (toggle) -->
    <div id="debugPanel" class="debug-panel" hidden>
        <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 style="margin:0">Debug - dernière réponse Make</h3>
            <div style="display:flex;gap:8px;align-items:center">
                <button id="copyPayloadBtn" class="debug-toggle">Copier dernier payload</button>
            </div>
        </div>
        <div style="margin-top:8px"><strong>Statut:</strong> <span id="debugStatus">-</span></div>
        <div><strong>Content-Type:</strong> <span id="debugContentType">-</span></div>
        <div><strong>Headers:</strong></div>
        <pre id="debugHeaders">-</pre>
        <div><strong>Body:</strong></div>
        <pre id="debugBody">-</pre>
        <div><strong>Dernier payload envoyé:</strong></div>
        <pre id="debugPayload">-</pre>
    </div>
    
    <script src="script.js"></script>
</body>
</html>